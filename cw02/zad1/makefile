CC = gcc
CFLAGS = -Wall

GENERATE = generate $(FILE) $(RECORDS) $(RECORD_SIZE)
COPY_SYS = copy $(FILE) $(DEST_SYS) $(RECORDS) $(RECORD_SIZE) sys
COPY_LIB = copy $(FILE) $(DEST_SYS) $(RECORDS) $(RECORD_SIZE) lib
SORT_SYS = sort $(FILE) $(RECORDS) $(RECORD_SIZE) sys
SORT_LIB = sort $(FILE) $(RECORDS) $(RECORD_SIZE) lib

RECORDS = 2000

RECORD_SIZE = 1
FILE = data_1
DEST_SYS = copy_sys_1
DEST_LIB = copy_lib_1
OPERATIONS_1 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)
RECORD_SIZE = 4
FILE = data_4
DEST_SYS = copy_sys_4
DEST_LIB = copy_lib_4
OPERATIONS_4 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)
RECORD_SIZE = 512
FILE = data_512
DEST_SYS = copy_sys_512
DEST_LIB = copy_lib_512
OPERATIONS_512 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)
RECORD_SIZE = 1024
FILE = data_1024
DEST_SYS = copy_sys_1024
DEST_LIB = copy_lib_1024
OPERATIONS_1024 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)
RECORD_SIZE = 4096
FILE = data_4096
DEST_SYS = copy_sys_4096
DEST_LIB = copy_lib_4096
OPERATIONS_4096 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)
RECORD_SIZE = 8192
FILE = data_8192
DEST_SYS = copy_sys_8192
DEST_LIB = copy_lib_8192
OPERATIONS_8192 := $(GENERATE) $(COPY_SYS) $(COPY_LIB) $(SORT_SYS) $(SORT_LIB)

all: main

test: main
	./main $(OPERATIONS_1) $(OPERATIONS_4) $(OPERATIONS_512) $(OPERATIONS_1024) $(OPERATIONS_4096) $(OPERATIONS_8192)

main:
	$(CC) $(CFLAGS) -c main.c
	$(CC) $(CFLAGS) main.o -o main
	./main $(OPERATIONS_1) $(OPERATIONS_4) $(OPERATIONS_512) $(OPERATIONS_1024) $(OPERATIONS_4096) $(OPERATIONS_8192)

cresult:
	rm -f wyniki.txt
clean:
	rm -f *.o main file data_* copy_*